<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oasis Donation</title>
    <link rel="stylesheet" href="donorwallet.css">
    <style>
        /* Additional styles needed for functionality */
        .carousel-row {
            display: flex;
            overflow-x: auto;
            gap: 15px;
            padding: 10px 0;
            scroll-snap-type: x mandatory;
        }

        .card {
            min-width: 120px;
            height: 120px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            color: white;
            text-align: center;
            padding: 10px;
            scroll-snap-align: center;
        }

        .card.selected {
            border: 3px solid #4ecdc4;
            box-shadow: 0 8px 30px rgba(78, 205, 196, 0.5);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .card-title {
            font-size: 12px;
            font-weight: bold;
            margin-top: 5px;
        }

        .card-price {
            font-size: 10px;
            opacity: 0.9;
        }

        .donation-btn {
            width: 100%;
            padding: 20px;
            border: none;
            border-radius: 15px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }

        .donation-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.3);
        }

        .support-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 10px 0;
        }

        .member-greeting {
            color: white;
            font-weight: bold;
        }

        .small-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.3);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .small-btn:hover {
            background: rgba(255, 255, 255, 0.6);
            color: #333;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            margin: 10% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 350px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-header {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .modal-btn.primary {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
        }

        .modal-btn.secondary {
            background: #f0f0f0;
            color: #333;
        }

        .form-group {
            margin: 15px 0;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .checkmark {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #4ecdc4;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            color: white;
            font-size: 40px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .transaction-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .transaction-info div {
            margin: 5px 0;
            color: white;
        }

        .about-text {
            color: white;
            line-height: 1.6;
            margin: 15px 0;
        }

        .contact-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            color: white;
            margin: 10px 0;
        }

        .donation-circles {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 30px 0;
            position: relative;
        }

        .circle {
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            text-align: center;
            position: absolute;
        }

        .circle-1 {
            width: 200px;
            height: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .circle-2 {
            width: 130px;
            height: 130px;
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
        }

        .circle-3 {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e8e 100%);
        }

        .hidden {
            display: none !important;
        }

        .scrolling-text {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            color: white;
            max-height: 100px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Top Bar (hidden on intro page) -->
        <div class="top-bar hidden" id="topBar">
            <button class="top-bar-icon" onclick="openScanModal()">ğŸ“·</button>
            <button class="top-bar-icon" onclick="showPage('donation')">ğŸ’</button>
            <button class="top-bar-icon" onclick="openSettingsModal()">ğŸ‘¤</button>
            <button class="top-bar-icon" onclick="showPage('about')">ğŸ“</button>
        </div>

        <!-- Page 1: Intro Page -->
        <div class="page active intro-page" id="introPage">
            <div class="title">
                <div>æµªæµªç¶ æ´²æåŠ©</div>
                <div>Oasis Donation</div>
            </div>
            <div class="image-carousel">
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iIzRlY2RjNCIvPgogIDx0ZXh0IHg9IjIwMCIgeT0iMTUwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5TdHJheSBEb2dzPC90ZXh0Pgo8L3N2Zz4=" class="carousel-image" alt="Stray Dogs">
            </div>
            <div class="start-buttons">
                <button class="start-btn english" onclick="startApp('en')">Start</button>
                <button class="start-btn chinese" onclick="startApp('zh')">é–‹å§‹</button>
            </div>
        </div>

        <!-- Page 2: Matching Page -->
        <div class="page page-with-bars" id="matchingPage">
            <div class="box">
                <div class="box-title" data-en="Please Select" data-zh="è«‹é¸æ“‡">è«‹é¸æ“‡</div>
                
                <div style="margin: 20px 0;">
                    <div class="box-title" style="font-size: 16px; margin-bottom: 10px;" data-en="NEEDS" data-zh="éœ€æ±‚">éœ€æ±‚</div>
                    <div class="carousel-row" id="needsCarousel">
                        <div class="card" data-type="needs" data-value="FOOD:$100" onclick="selectCard(this)">
                            <div>ğŸ–</div>
                            <div class="card-title" data-en="Nutritional Food" data-zh="ç‡Ÿé¤Šç³§é£Ÿ">ç‡Ÿé¤Šç³§é£Ÿ</div>
                            <div class="card-price">$100/ä»½</div>
                        </div>
                        <div class="card" data-type="needs" data-value="INSURANCE:$268" onclick="selectCard(this)">
                            <div>ğŸ¥</div>
                            <div class="card-title" data-en="Medical Insurance" data-zh="é†«ç™‚ä¿éšª">é†«ç™‚ä¿éšª</div>
                            <div class="card-price">$268/æœˆ</div>
                        </div>
                        <div class="card" data-type="needs" data-value="COLLAR:$330" onclick="selectCard(this)">
                            <div>ğŸ“±</div>
                            <div class="card-title" data-en="Smart Collar" data-zh="æ™ºèƒ½é ¸åœˆ">æ™ºèƒ½é ¸åœˆ</div>
                            <div class="card-price">$330/ä»¶</div>
                        </div>
                        <div class="card" data-type="needs" data-value="ADOPTION:$489" onclick="selectCard(this)">
                            <div>â¤ï¸</div>
                            <div class="card-title" data-en="Full Adoption" data-zh="å…¨é¢åŠ©é¤Š">å…¨é¢åŠ©é¤Š</div>
                            <div class="card-price">$489/æœˆ</div>
                        </div>
                    </div>
                </div>

                <div style="margin: 20px 0;">
                    <div class="box-title" style="font-size: 16px; margin-bottom: 10px;" data-en="LIVES" data-zh="ç”Ÿå‘½">ç”Ÿå‘½</div>
                    <div class="carousel-row" id="livesCarousel">
                        <div class="card" data-type="lives" data-value="ALLSTRAY:1" onclick="selectCard(this)">
                            <div>ğŸ </div>
                            <div class="card-title" data-en="All Strays" data-zh="ç¶ æ´²æµªæµª">ç¶ æ´²æµªæµª</div>
                        </div>
                        <div class="card" data-type="lives" data-value="SQUIRREL:1" onclick="selectCard(this)">
                            <div>ğŸ•</div>
                            <div class="card-title" data-en="Squirrel Dog, 6 years" data-zh="æ¾é¼ ç‹—6æ­²">æ¾é¼ ç‹—6æ­²</div>
                        </div>
                        <div class="card" data-type="lives" data-value="PUG:1" onclick="selectCard(this)">
                            <div>ğŸ¶</div>
                            <div class="card-title" data-en="Pug Dog, 8 years" data-zh="å…«å“¥ç‹—8æ­²">å…«å“¥ç‹—8æ­²</div>
                        </div>
                        <div class="card" data-type="lives" data-value="TERRIER:1" onclick="selectCard(this)">
                            <div>ğŸ¦®</div>
                            <div class="card-title" data-en="Terrier Dog, 14 years" data-zh="çˆ¹åˆ©ç‹—14æ­²">çˆ¹åˆ©ç‹—14æ­²</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="box">
                <div class="box-title" data-en="Please Support" data-zh="è«‹æ”¯æŒ">è«‹æ”¯æŒ</div>
                
                <button class="donation-btn" onclick="showPage('donation')" data-en="DONATE NOW" data-zh="ç«‹å³ææ¬¾">ç«‹å³ææ¬¾</button>
                
                <div class="support-row">
                    <div class="member-greeting" id="memberGreeting" data-en="I am a guest" data-zh="æˆ‘æ˜¯è¨ªå®¢">æˆ‘æ˜¯è¨ªå®¢</div>
                    <button class="small-btn" onclick="openSettingsModal()" id="memberBtn" data-en="Login" data-zh="ç™»éŒ„">ç™»éŒ„</button>
                </div>
                
                <div class="support-row">
                    <button class="small-btn" onclick="openTotalDonationsModal()" data-en="Total Donations" data-zh="ç¸½ææ¬¾">ç¸½ææ¬¾ $<span id="totalAmount">5,389,730</span></button>
                    <button class="small-btn" onclick="openUsedDonationsModal()" data-en="Used Donations" data-zh="å·²ç”¨ææ¬¾">å·²ç”¨ææ¬¾ $<span id="usedAmount">3,897,304</span></button>
                </div>
            </div>
        </div>

        <!-- Page 3: Donation Page -->
        <div class="page page-with-bars" id="donationPage">
            <div class="box">
                <div class="box-title" data-en="Thank You for Donation" data-zh="å¤šè¬ææ¬¾">å¤šè¬ææ¬¾</div>
                <div class="scrolling-text" id="donationItems"></div>
                <div style="color: white; font-size: 18px; font-weight: bold; margin: 15px 0;">
                    <span data-en="Total Amount:" data-zh="ç¸½é‡‘é¡:">ç¸½é‡‘é¡:</span> $<span id="donationTotal">0</span>
                </div>
                <button class="donation-btn" onclick="openPaymentModal()" data-en="Pay by STRIPE" data-zh="ä½¿ç”¨ STRIPE ä»˜æ¬¾">ä½¿ç”¨ STRIPE ä»˜æ¬¾</button>
            </div>

            <div class="box" id="donationComplete" style="display: none;">
                <div class="box-title" data-en="Donation Complete" data-zh="ææ¬¾å®Œæˆ">ææ¬¾å®Œæˆ</div>
                <div class="checkmark">âœ“</div>
                <div class="transaction-info" id="transactionInfo"></div>
            </div>
        </div>

        <!-- Page 4: About Page -->
        <div class="page page-with-bars" id="aboutPage">
            <div class="box">
                <div class="box-title" data-en="Donation Summary" data-zh="ææ¬¾æ‘˜è¦">ææ¬¾æ‘˜è¦</div>
                <div class="donation-circles">
                    <div class="circle circle-1">
                        <div>
                            <div data-en="Total Oasis" data-zh="ç¶ æ´²ç¸½é¡">ç¶ æ´²ç¸½é¡</div>
                            <div>$<span id="oasisTotal">5,395,119</span></div>
                        </div>
                    </div>
                    <div class="circle circle-2">
                        <div>
                            <div data-en="Used" data-zh="å·²ä½¿ç”¨">å·²ä½¿ç”¨</div>
                            <div>$<span id="oasisUsed">3,898,637</span></div>
                        </div>
                    </div>
                    <div class="circle circle-3">
                        <div>
                            <div data-en="Mine" data-zh="æˆ‘çš„">æˆ‘çš„</div>
                            <div>$<span id="myUsed">0</span></div>
                        </div>
                    </div>
                </div>
                <button class="small-btn" onclick="window.open('https://quantumbesu.web.app/contract/oasisHKD', '_blank')" data-en="View Smart Contract" data-zh="æŸ¥çœ‹æ™ºèƒ½åˆç´„">æŸ¥çœ‹æ™ºèƒ½åˆç´„</button>
            </div>

            <div class="box">
                <div class="box-title" data-en="About Us" data-zh="é—œæ–¼æˆ‘å€‘">é—œæ–¼æˆ‘å€‘</div>
                <div class="about-text">
                    ç•¶æ¯ä¸€éš»æµæµªçŠ¬çš„é …åœˆéƒ½åœ¨å®ˆè­·å®¶çš„å¹³å®‰,ç•¶æ²™é ­è§’çš„æ•¸æ“šæˆç‚ºåƒè¬å¯µç‰©çš„å¥åº·ç‡ˆå¡”â€”â€” é€™ä¾¿æ˜¯è’åœ°é‡ç”Ÿç‚ºç§‘æŠ€å–„æ„çš„çµ‚æ¥µè­‰æ˜ã€‚
                </div>
                <div class="contact-info">
                    <div><strong data-en="Organization:" data-zh="åŸ·è¡Œæ©Ÿæ§‹:">åŸ·è¡Œæ©Ÿæ§‹:</strong> é¦™æ¸¯çŠ¬éš»é ˜é¤Šé…å°åŠæ•™è‚²å”æœƒæœ‰é™å…¬å¸</div>
                    <div><strong>CR No:</strong> 2937991</div>
                    <div><strong data-en="Tech Partner:" data-zh="ç§‘æŠ€åˆä½œå¤¥ä¼´:">ç§‘æŠ€åˆä½œå¤¥ä¼´:</strong> Real Matter Technology Limited</div>
                    <div><strong data-en="Contact:" data-zh="è¯çµ¡äºº:">è¯çµ¡äºº:</strong> é™³å…ˆç”Ÿ</div>
                    <div><strong data-en="Phone:" data-zh="é›»è©±:">é›»è©±:</strong> 852-63600336</div>
                </div>
            </div>
        </div>

        <!-- Footer Bar (hidden on intro page) -->
        <div class="footer-bar hidden" id="footerBar">
            <button class="footer-btn" onclick="previousPage()" id="prevBtn" data-en="Previous" data-zh="ä¸Šä¸€é ">ä¸Šä¸€é </button>
            <button class="footer-btn" onclick="nextPage()" id="nextBtn" data-en="Next" data-zh="ä¸‹ä¸€é ">ä¸‹ä¸€é </button>
        </div>
    </div>

    <!-- Modals -->
    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header" data-en="Member Settings" data-zh="æœƒå“¡è¨­å®š">æœƒå“¡è¨­å®š</div>
            <div id="loginForm">
                <div class="form-group">
                    <label data-en="Username:" data-zh="ç”¨æˆ¶å:">ç”¨æˆ¶å:</label>
                    <input type="text" id="username" value="">
                </div>
                <div class="form-group">
                    <label data-en="Password:" data-zh="å¯†ç¢¼:">å¯†ç¢¼:</label>
                    <input type="password" id="password" value="">
                </div>
            </div>
            <div id="memberInfo" style="display: none;">
                <div style="margin: 10px 0;"><strong data-en="Name:" data-zh="å§“å:">å§“å:</strong> Alice</div>
                <div style="margin: 10px 0;"><strong data-en="Address:" data-zh="åœ°å€:">åœ°å€:</strong> 0x7a8f9...bc3e2</div>
                <div style="margin: 10px 0;"><strong data-en="Level:" data-zh="ç´šåˆ¥:">ç´šåˆ¥:</strong> Gold</div>
                <div style="margin: 10px 0;"><strong data-en="Expires:" data-zh="åˆ°æœŸæ—¥:">åˆ°æœŸæ—¥:</strong> 2029-12-31</div>
                <button class="modal-btn secondary" disabled data-en="Download Receipt" data-zh="ä¸‹è¼‰æ”¶æ“š">ä¸‹è¼‰æ”¶æ“š</button>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn primary" onclick="toggleLogin()" id="loginBtn" data-en="Login" data-zh="ç™»éŒ„">ç™»éŒ„</button>
                <button class="modal-btn secondary" onclick="closeModal('settingsModal')" data-en="Cancel" data-zh="å–æ¶ˆ">å–æ¶ˆ</button>
            </div>
        </div>
    </div>

    <!-- Select Modal -->
    <div class="modal" id="selectModal">
        <div class="modal-content">
            <div class="modal-header" id="selectModalTitle"></div>
            <div id="selectModalContent"></div>
            <div class="modal-buttons">
                <button class="modal-btn primary" onclick="toggleSelection()" id="selectBtn">Select</button>
                <button class="modal-btn secondary" onclick="closeModal('selectModal')">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Total Donations Modal -->
    <div class="modal" id="totalDonationsModal">
        <div class="modal-content">
            <div class="modal-header" data-en="Total Donations" data-zh="ç¸½ææ¬¾">ç¸½ææ¬¾</div>
            <div style="margin: 15px 0; line-height: 1.5;">
                <span data-en="Stablecoin smart contract manages all donations transparently on blockchain." data-zh="ç©©å®šå¹£æ™ºèƒ½åˆç´„åœ¨å€å¡Šéˆä¸Šé€æ˜ç®¡ç†æ‰€æœ‰ææ¬¾ã€‚">ç©©å®šå¹£æ™ºèƒ½åˆç´„åœ¨å€å¡Šéˆä¸Šé€æ˜ç®¡ç†æ‰€æœ‰ææ¬¾ã€‚</span>
            </div>
            <div style="margin: 15px 0;">
                <strong data-en="Contract Address:" data-zh="åˆç´„åœ°å€:">åˆç´„åœ°å€:</strong><br>
                0xa1b2c3d4e5f6789...
            </div>
            <div style="max-height: 200px; overflow-y: auto;">
                <div><strong data-en="Recent Donations:" data-zh="æœ€è¿‘ææ¬¾:">æœ€è¿‘ææ¬¾:</strong></div>
                <div>2024-08-08: $268</div>
                <div>2024-08-07: $100</div>
                <div>2024-08-06: $489</div>
                <div>2024-08-05: $330</div>
                <div>2024-08-04: $100</div>
                <div>2024-08-03: $268</div>
                <div>2024-08-02: $489</div>
                <div>2024-08-01: $330</div>
                <div>2024-07-31: $100</div>
                <div>2024-07-30: $268</div>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn primary" onclick="window.open('https://quantumbesu.web.app/contract/oasisHKD', '_blank')" data-en="View Contract" data-zh="æŸ¥çœ‹åˆç´„">æŸ¥çœ‹åˆç´„</button>
                <button class="modal-btn secondary" onclick="closeModal('totalDonationsModal')" data-en="Close" data-zh="é—œé–‰">é—œé–‰</button>
            </div>
        </div>
    </div>

    <!-- Used Donations Modal -->
    <div class="modal" id="usedDonationsModal">
        <div class="modal-content">
            <div class="modal-header" data-en="Used Donations" data-zh="å·²ç”¨ææ¬¾">å·²ç”¨ææ¬¾</div>
            <div style="margin: 15px 0; line-height: 1.5;">
                <span data-en="Quantum-safe blockchain ensures transparent tracking of donation usage." data-zh="é‡å­å®‰å…¨å€å¡Šéˆç¢ºä¿ææ¬¾ä½¿ç”¨çš„é€æ˜è¿½è¹¤ã€‚">é‡å­å®‰å…¨å€å¡Šéˆç¢ºä¿ææ¬¾ä½¿ç”¨çš„é€æ˜è¿½è¹¤ã€‚</span>
            </div>
            <div style="margin: 15px 0;">
                <strong data-en="Account Address:" data-zh="å¸³æˆ¶åœ°å€:">å¸³æˆ¶åœ°å€:</strong><br>
                0x9z8y7x6w5v4u321...
            </div>
            <div style="max-height: 200px; overflow-y: auto;">
                <div><strong data-en="Purchase History:" data-zh="è³¼è²·è¨˜éŒ„:">è³¼è²·è¨˜éŒ„:</strong></div>
                <div>2024-08-08: é†«ç™‚ä¿éšª</div>
                <div>2024-08-07: ç‡Ÿé¤Šç³§é£Ÿ</div>
                <div>2024-08-06: å…¨é¢åŠ©é¤Š</div>
                <div>2024-08-05: æ™ºèƒ½é ¸åœˆ</div>
                <div>2024-08-04: ç‡Ÿé¤Šç³§é£Ÿ</div>
                <div>2024-08-03: é†«ç™‚ä¿éšª</div>
                <div>2024-08-02: å…¨é¢åŠ©é¤Š</div>
                <div>2024-08-01: æ™ºèƒ½é ¸åœˆ</div>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn primary" onclick="window.open('https://quantumbesu.web.app/account/allstray', '_blank')" data-en="View Blockchain" data-zh="æŸ¥çœ‹å€å¡Šéˆ">æŸ¥çœ‹å€å¡Šéˆ</button>
                <button class="modal-btn secondary" onclick="closeModal('usedDonationsModal')" data-en="Close" data-zh="é—œé–‰">é—œé–‰</button>
            </div>
        </div>
    </div>

    <!-- Scan Modal -->
    <div class="modal" id="scanModal">
        <div class="modal-content">
            <div class="modal-header" data-en="Scan QR Code" data-zh="æƒæäºŒç¶­ç¢¼">æƒæäºŒç¶­ç¢¼</div>
            <div style="height: 200px; background: #f0f0f0; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin: 20px 0;">
                <div data-en="Camera would be activated here" data-zh="æ”åƒé ­å°‡åœ¨æ­¤è™•å•Ÿå‹•">æ”åƒé ­å°‡åœ¨æ­¤è™•å•Ÿå‹•</div>
            </div>
            <div class="modal-buttons">
                <button class="modal-btn primary" onclick="confirmScan()" data-en="Confirm" data-zh="ç¢ºèª">ç¢ºèª</button>
                <button class="modal-btn secondary" onclick="closeModal('scanModal')" data-en="Cancel" data-zh="å–æ¶ˆ">å–æ¶ˆ</button>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <div class="modal-header" data-en="STRIPE Payment" data-zh="STRIPE ä»˜æ¬¾">STRIPE ä»˜æ¬¾</div>
            <div class="form-group">
                <label data-en="Visa Card Number:" data-zh="Visaå¡è™Ÿ:">Visaå¡è™Ÿ:</label>
                <input type="text" placeholder="1234 5678 9012 3456">
            </div>
            <div class="form-group">
                <label data-en="Billing Address:" data-zh="å¸³å–®åœ°å€:">å¸³å–®åœ°å€:</label>
                <input type="text" placeholder="123 Main St, City">
            </div>
            <div class="form-group">
                <label data-en="Cardholder Name:" data-zh="æŒå¡äººå§“å:">æŒå¡äººå§“å:</label>
                <input type="text" placeholder="John Doe">
            </div>
            <div class="form-group">
                <label data-en="Email:" data-zh="é›»å­éƒµä»¶:">é›»å­éƒµä»¶:</label>
                <input type="email" placeholder="john@example.com">
            </div>
            <div class="modal-buttons">
                <button class="modal-btn primary" onclick="processPayment()" disabled data-en="Pay" data-zh="ä»˜æ¬¾">ä»˜æ¬¾</button>
                <button class="modal-btn secondary" onclick="closeModal('paymentModal')" data-en="Cancel" data-zh="å–æ¶ˆ">å–æ¶ˆ</button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentLanguage = 'zh';
        let currentPage = 'intro';
        let isLoggedIn = false;
        let selectedNeeds = [];
        let selectedLives = [];
        let currentSelectedCard = null;
        let mockData = {
            guest: { total: 5389730, used: 3897304 },
            alice: { total: 5389, used: 1333 }
        };

        // Language data
        const translations = {
            en: {
                'Please Select': 'Please Select',
                'Please Support': 'Please Support',
                'NEEDS': 'NEEDS',
                'LIVES': 'LIVES',
                'Nutritional Food': 'Nutritional Food',
                'Medical Insurance': 'Medical Insurance',
                'Smart Collar': 'Smart Collar',
                'Full Adoption': 'Full Adoption',
                'All Strays': 'All Strays',
                'Squirrel Dog, 6 years': 'Squirrel Dog, 6 years',
                'Pug Dog, 8 years': 'Pug Dog, 8 years',
                'Terrier Dog, 14 years': 'Terrier Dog, 14 years',
                'DONATE NOW': 'DONATE NOW',
                'I am a guest': 'I am a guest',
                'Hello Alice': 'Hello Alice',
                'Login': 'Login',
                'Member Settings': 'Member Settings',
                'Total Donations': 'Total Donations',
                'Used Donations': 'Used Donations',
                'Thank You for Donation': 'Thank You for Donation',
                'Total Amount:': 'Total Amount:',
                'Pay by STRIPE': 'Pay by STRIPE',
                'Donation Complete': 'Donation Complete',
                'Previous': 'Previous',
                'Next': 'Next'
            },
            zh: {
                'Please Select': 'è«‹é¸æ“‡',
                'Please Support': 'è«‹æ”¯æŒ',
                'NEEDS': 'éœ€æ±‚',
                'LIVES': 'ç”Ÿå‘½',
                'Nutritional Food': 'ç‡Ÿé¤Šç³§é£Ÿ',
                'Medical Insurance': 'é†«ç™‚ä¿éšª',
                'Smart Collar': 'æ™ºèƒ½é ¸åœˆ',
                'Full Adoption': 'å…¨é¢åŠ©é¤Š',
                'All Strays': 'ç¶ æ´²æµªæµª',
                'Squirrel Dog, 6 years': 'æ¾é¼ ç‹—6æ­²',
                'Pug Dog, 8 years': 'å…«å“¥ç‹—8æ­²',
                'Terrier Dog, 14 years': 'çˆ¹åˆ©ç‹—14æ­²',
                'DONATE NOW': 'ç«‹å³ææ¬¾',
                'I am a guest': 'æˆ‘æ˜¯è¨ªå®¢',
                'Hello Alice': 'æ‚¨å¥½ Alice',
                'Login': 'ç™»éŒ„',
                'Member Settings': 'æœƒå“¡è¨­å®š',
                'Total Donations': 'ç¸½ææ¬¾',
                'Used Donations': 'å·²ç”¨ææ¬¾',
                'Thank You for Donation': 'å¤šè¬ææ¬¾',
                'Total Amount:': 'ç¸½é‡‘é¡:',
                'Pay by STRIPE': 'ä½¿ç”¨ STRIPE ä»˜æ¬¾',
                'Donation Complete': 'ææ¬¾å®Œæˆ',
                'Previous': 'ä¸Šä¸€é ',
                'Next': 'ä¸‹ä¸€é '
            }
        };

        // Initialize app
        function startApp(language) {
            currentLanguage = language;
            updateLanguage();
            showPage('matching');
            document.getElementById('topBar').classList.remove('hidden');
            document.getElementById('footerBar').classList.remove('hidden');
        }

        // Update language throughout the app
        function updateLanguage() {
            const elements = document.querySelectorAll('[data-en]');
            elements.forEach(element => {
                const key = currentLanguage === 'en' ? element.getAttribute('data-en') : element.getAttribute('data-zh');
                if (key) {
                    element.textContent = key;
                }
            });
        }

        // Page navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });

            // Show target page
            const targetPage = pageId + 'Page';
            document.getElementById(targetPage).classList.add('active');
            currentPage = pageId;

            // Update page-specific data
            if (pageId === 'donation') {
                updateDonationPage();
            } else if (pageId === 'about') {
                updateAboutPage();
            }

            updateFooterButtons();
        }

        function previousPage() {
            const pages = ['matching', 'donation', 'about'];
            const currentIndex = pages.indexOf(currentPage);
            if (currentIndex > 0) {
                showPage(pages[currentIndex - 1]);
            }
        }

        function nextPage() {
            const pages = ['matching', 'donation', 'about'];
            const currentIndex = pages.indexOf(currentPage);
            if (currentIndex < pages.length - 1) {
                showPage(pages[currentIndex + 1]);
            }
        }

        function updateFooterButtons() {
            const pages = ['matching', 'donation', 'about'];
            const currentIndex = pages.indexOf(currentPage);
            
            document.getElementById('prevBtn').disabled = currentIndex === 0;
            document.getElementById('nextBtn').disabled = currentIndex === pages.length - 1;
        }

        // Card selection
        function selectCard(card) {
            currentSelectedCard = card;
            const isSelected = card.classList.contains('selected');
            const type = card.getAttribute('data-type');
            const value = card.getAttribute('data-value');

            // Show select modal
            const modal = document.getElementById('selectModal');
            const title = document.getElementById('selectModalTitle');
            const content = document.getElementById('selectModalContent');
            const selectBtn = document.getElementById('selectBtn');

            title.textContent = card.querySelector('.card-title').textContent;
            content.innerHTML = `
                <div style="text-align: center; margin: 20px 0;">
                    <div style="font-size: 48px; margin-bottom: 10px;">${card.querySelector('div').textContent}</div>
                    <div style="font-size: 16px; font-weight: bold;">${card.querySelector('.card-title').textContent}</div>
                    <div style="font-size: 14px; margin-top: 5px;">${getCardDescription(value)}</div>
                </div>
            `;

            selectBtn.textContent = isSelected ? 
                (currentLanguage === 'en' ? 'Unselect' : 'å–æ¶ˆé¸æ“‡') : 
                (currentLanguage === 'en' ? 'Select' : 'é¸æ“‡');

            modal.style.display = 'block';
        }

        function getCardDescription(value) {
            const descriptions = {
                'FOOD:$100': currentLanguage === 'en' ? 'Five meals a day, not instant noodles' : 'ä¸€æ—¥äº”é¤éå…¬ä»”éºµ',
                'INSURANCE:$268': currentLanguage === 'en' ? 'Medical check-ups and surgery' : 'ç‡é†«ç”ŸåŠæ‰‹è¡“',
                'COLLAR:$330': currentLanguage === 'en' ? 'Automatic health monitoring' : 'è‡ªå‹•å¥åº·æª¢æŸ¥',
                'ADOPTION:$489': currentLanguage === 'en' ? 'Real-time activity and health data' : 'å³æ™‚æ´»å‹•å¥åº·è³‡æ–™',
                'ALLSTRAY:1': currentLanguage === 'en' ? 'All strays in the sanctuary' : 'åœ’å€å…§æ‰€æœ‰éœ€è¦ç…§é¡§çš„æµªæµª',
                'SQUIRREL:1': currentLanguage === 'en' ? 'Healthy and happy with one eye issue' : 'å¥åº·å¿«æ¨‚ ä¸€éš»çœ¼ç–¾',
                'PUG:1': currentLanguage === 'en' ? 'Active spirit with occasional stomach pain' : 'ç²¾ç¥æ´»èº é–“ä¸­è‚šç—›',
                'TERRIER:1': currentLanguage === 'en' ? 'Strong despite age, right leg less flexible' : 'è€ç•¶ç›Šå£¯ å³è…³ä¸éˆæ´»'
            };
            return descriptions[value] || '';
        }

        function toggleSelection() {
            if (!currentSelectedCard) return;

            const isSelected = currentSelectedCard.classList.contains('selected');
            const type = currentSelectedCard.getAttribute('data-type');
            const value = currentSelectedCard.getAttribute('data-value');

            if (isSelected) {
                // Unselect
                currentSelectedCard.classList.remove('selected');
                if (type === 'needs') {
                    selectedNeeds = selectedNeeds.filter(item => item !== value);
                } else {
                    selectedLives = selectedLives.filter(item => item !== value);
                }
            } else {
                // Select
                currentSelectedCard.classList.add('selected');
                if (type === 'needs') {
                    selectedNeeds.push(value);
                } else {
                    selectedLives.push(value);
                }
            }

            closeModal('selectModal');
            updateSelectionData();
        }

        function updateSelectionData() {
            // This would normally update the JSON data output
            console.log({
                NEEDS: selectedNeeds,
                LIVES: selectedLives
            });
        }

        // Modal functions
        function openSettingsModal() {
            document.getElementById('settingsModal').style.display = 'block';
            if (isLoggedIn) {
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('memberInfo').style.display = 'block';
                document.getElementById('loginBtn').textContent = currentLanguage === 'en' ? 'Logout' : 'ç™»å‡º';
            } else {
                document.getElementById('loginForm').style.display = 'block';
                document.getElementById('memberInfo').style.display = 'none';
                document.getElementById('loginBtn').textContent = currentLanguage === 'en' ? 'Login' : 'ç™»éŒ„';
            }
        }

        function openTotalDonationsModal() {
            document.getElementById('totalDonationsModal').style.display = 'block';
        }

        function openUsedDonationsModal() {
            document.getElementById('usedDonationsModal').style.display = 'block';
        }

        function openScanModal() {
            document.getElementById('scanModal').style.display = 'block';
        }

        function openPaymentModal() {
            if (selectedNeeds.length === 0 || selectedLives.length === 0) {
                alert(currentLanguage === 'en' ? 'Please select at least one need and one life to help.' : 'è«‹è‡³å°‘é¸æ“‡ä¸€é …éœ€æ±‚å’Œä¸€å€‹ç”Ÿå‘½ä¾†å¹«åŠ©ã€‚');
                return;
            }
            document.getElementById('paymentModal').style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Login functionality
        function toggleLogin() {
            if (isLoggedIn) {
                // Logout
                isLoggedIn = false;
                document.getElementById('memberGreeting').textContent = currentLanguage === 'en' ? 'I am a guest' : 'æˆ‘æ˜¯è¨ªå®¢';
                document.getElementById('memberBtn').textContent = currentLanguage === 'en' ? 'Login' : 'ç™»éŒ„';
                updateTotals();
            } else {
                // Login
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;

                if (username === 'alice' && password === '2345') {
                    isLoggedIn = true;
                    document.getElementById('memberGreeting').textContent = currentLanguage === 'en' ? 'Hello Alice' : 'æ‚¨å¥½ Alice';
                    document.getElementById('memberBtn').textContent = currentLanguage === 'en' ? 'Member Settings' : 'æœƒå“¡è¨­å®š';
                    updateTotals();
                    closeModal('settingsModal');
                } else {
                    alert(currentLanguage === 'en' ? 'Invalid credentials' : 'ç™»éŒ„æ†‘è­‰ç„¡æ•ˆ');
                }
            }
            closeModal('settingsModal');
        }

        function updateTotals() {
            const userData = isLoggedIn ? mockData.alice : mockData.guest;
            document.getElementById('totalAmount').textContent = userData.total.toLocaleString();
            document.getElementById('usedAmount').textContent = userData.used.toLocaleString();
        }

        // Donation page functions
        function updateDonationPage() {
            if (selectedNeeds.length === 0 || selectedLives.length === 0) {
                document.getElementById('donationItems').innerHTML = currentLanguage === 'en' ? 
                    'Please select items and animals from the matching page first.' :
                    'è«‹å…ˆå¾é…å°é é¢é¸æ“‡é …ç›®å’Œå‹•ç‰©ã€‚';
                document.getElementById('donationTotal').textContent = '0';
                return;
            }

            let itemsText = '';
            let total = 0;

            selectedNeeds.forEach(need => {
                const [item, price] = need.split(':');
                const amount = parseInt(price.replace(', ''));
                total += amount * selectedLives.length;
                itemsText += `${item}: ${price} x ${selectedLives.length} = ${amount * selectedLives.length}<br>`;
            });

            document.getElementById('donationItems').innerHTML = itemsText;
            document.getElementById('donationTotal').textContent = total.toLocaleString();
        }

        function processPayment() {
            // Simulate payment processing
            setTimeout(() => {
                const now = new Date();
                const transactionHash = '0x' + Math.random().toString(16).substr(2, 8);
                const blockNumber = Math.floor(Math.random() * 1000000);
                const amount = document.getElementById('donationTotal').textContent;

                document.getElementById('transactionInfo').innerHTML = `
                    <div><strong>${currentLanguage === 'en' ? 'Timestamp:' : 'æ™‚é–“æˆ³:'}</strong> ${now.toLocaleString()}</div>
                    <div><strong>${currentLanguage === 'en' ? 'Amount:' : 'é‡‘é¡:'}</strong> ${amount}</div>
                    <div><strong>${currentLanguage === 'en' ? 'Block Number:' : 'å€å¡Šè™Ÿ:'}</strong> ${blockNumber}</div>
                    <div><strong>${currentLanguage === 'en' ? 'Transaction Hash:' : 'äº¤æ˜“å“ˆå¸Œ:'}</strong> ${transactionHash}</div>
                `;

                document.getElementById('donationComplete').style.display = 'block';
                closeModal('paymentModal');

                // Update totals
                if (isLoggedIn) {
                    mockData.alice.total += parseInt(amount.replace(',', ''));
                } else {
                    mockData.guest.total += parseInt(amount.replace(',', ''));
                }
                updateTotals();
            }, 2000);
        }

        function confirmScan() {
            // Simulate QR scan result
            alert(currentLanguage === 'en' ? 'QR Code scanned successfully!' : 'äºŒç¶­ç¢¼æƒææˆåŠŸï¼');
            closeModal('scanModal');
        }

        // About page functions
        function updateAboutPage() {
            const guestTotal = mockData.guest.total;
            const guestUsed = mockData.guest.used;
            const aliceTotal = mockData.alice.total;
            const aliceUsed = mockData.alice.used;

            const oasisTotal = guestTotal + aliceTotal;
            const oasisUsed = guestUsed + aliceUsed;
            const myUsed = isLoggedIn ? aliceUsed : 0;

            document.getElementById('oasisTotal').textContent = oasisTotal.toLocaleString();
            document.getElementById('oasisUsed').textContent = oasisUsed.toLocaleString();
            document.getElementById('myUsed').textContent = myUsed.toLocaleString();
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            updateTotals();
        });
    </script>
</body>
</html>
